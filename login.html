<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Veterin√°rio - Login</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: 
                linear-gradient(135deg, rgba(10, 40, 10, 0.9) 0%, rgba(20, 60, 20, 0.95) 100%),
                url('https://images.unsplash.com/photo-1597852074816-d933c7d2b988?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Pattern militar sutil */
        body:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(139, 0, 0, 0.1) 2px, transparent 2px),
                radial-gradient(circle at 80% 70%, rgba(0, 100, 0, 0.1) 2px, transparent 2px);
            background-size: 50px 50px;
            z-index: 0;
        }

        /* Linhas decorativas diagonais */
        .diagonal-line {
            position: absolute;
            width: 200%;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(210, 180, 140, 0.3), transparent);
            transform: rotate(45deg);
            z-index: 0;
        }

        .diagonal-line:nth-child(1) {
            top: 20%;
            left: -50%;
        }

        .diagonal-line:nth-child(2) {
            top: 40%;
            left: -50%;
        }

        .diagonal-line:nth-child(3) {
            top: 60%;
            left: -50%;
        }

        .diagonal-line:nth-child(4) {
            top: 80%;
            left: -50%;
        }
        
        .login-container {
            background: rgba(255, 255, 255, 0.97);
            border-radius: 20px;
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.3),
                0 0 0 2px rgba(0, 100, 0, 0.1);
            width: 100%;
            max-width: 480px;
            padding: 40px;
            position: relative;
            z-index: 2;
            overflow: hidden;
            transition: transform 0.4s ease, box-shadow 0.4s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 100, 0, 0.2);
        }

        .login-container:hover {
            transform: translateY(-5px);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.3),
                0 0 0 2px rgba(139, 0, 0, 0.2);
        }
        
        /* Borda decorativa superior */
        .login-container:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, 
                #8B0000 0%, 
                #006400 25%, 
                #D2B48C 50%, 
                #006400 75%, 
                #8B0000 100%);
            border-radius: 20px 20px 0 0;
        }
        
        .logo {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        
        .logo-badge {
            width: 100px;
            height: 100px;
            margin: 0 auto 20px;
            background: linear-gradient(135deg, #8B0000, #006400);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 
                0 8px 20px rgba(139, 0, 0, 0.3),
                inset 0 2px 4px rgba(255, 255, 255, 0.3);
            border: 3px solid #D2B48C;
        }

        .logo-badge:after {
            content: '';
            position: absolute;
            width: 110px;
            height: 110px;
            border: 2px solid rgba(210, 180, 140, 0.5);
            border-radius: 50%;
        }
        
        .logo-badge img {
            width: 70%;
            height: 70%;
            object-fit: contain;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }
        
        .logo h1 {
            color: #006400;
            font-size: 32px;
            margin-bottom: 8px;
            font-weight: 800;
            letter-spacing: 1px;
            text-transform: uppercase;
            background: linear-gradient(90deg, #8B0000, #006400);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .logo p {
            color: #8B0000;
            font-size: 18px;
            font-weight: 600;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 5px;
        }

        .logo-subtitle {
            color: #666;
            font-size: 14px;
            font-weight: 400;
            font-style: italic;
            text-transform: none;
            letter-spacing: 1px;
            border-top: 1px solid #D2B48C;
            padding-top: 8px;
            margin-top: 8px;
            display: inline-block;
        }
        
        .login-form {
            display: flex;
            flex-direction: column;
        }
        
        .form-group {
            margin-bottom: 25px;
            position: relative;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            color: #006400;
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        label:before {
            content: '‚ñ∂';
            color: #8B0000;
            font-size: 10px;
        }
        
        input, select {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #D2B48C;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s;
            background-color: rgba(250, 250, 250, 0.9);
            color: #333;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        input:focus, select:focus {
            border-color: #8B0000;
            outline: none;
            box-shadow: 
                0 0 0 4px rgba(139, 0, 0, 0.15),
                inset 0 2px 5px rgba(0, 0, 0, 0.05);
            background-color: white;
            transform: translateY(-2px);
        }

        input::placeholder {
            color: #999;
            font-style: italic;
        }
        
        .password-container {
            position: relative;
        }
        
        .toggle-password {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 100, 0, 0.1);
            border: none;
            cursor: pointer;
            color: #8B0000;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .toggle-password:hover {
            background: rgba(139, 0, 0, 0.1);
            color: #006400;
            transform: translateY(-50%) scale(1.1);
        }
        
        .btn-login {
            background: linear-gradient(135deg, #8B0000 0%, #006400 100%);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s;
            margin-top: 15px;
            box-shadow: 
                0 6px 15px rgba(139, 0, 0, 0.3),
                0 2px 4px rgba(0, 0, 0, 0.1);
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            overflow: hidden;
        }
        
        .btn-login:hover {
            transform: translateY(-3px);
            box-shadow: 
                0 10px 20px rgba(139, 0, 0, 0.4),
                0 4px 8px rgba(0, 0, 0, 0.15);
            letter-spacing: 3px;
        }
        
        .btn-login:active {
            transform: translateY(0);
        }
        
        .btn-login:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.6s;
        }
        
        .btn-login:hover:before {
            left: 100%;
        }

        .btn-login:after {
            content: 'üîí';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 20px;
            opacity: 0.8;
        }
        
        .permissions-info {
            margin-top: 30px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(210, 180, 140, 0.1), rgba(0, 100, 0, 0.05));
            border-radius: 12px;
            font-size: 14px;
            border: 1px solid rgba(210, 180, 140, 0.3);
            position: relative;
            overflow: hidden;
        }

        .permissions-info:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(to bottom, #8B0000, #006400);
        }
        
        .permissions-info h3 {
            color: #006400;
            margin-bottom: 15px;
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .permissions-info h3:before {
            content: '‚öî';
            font-size: 18px;
        }
        
        .permissions-info ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .permissions-info li {
            margin-bottom: 12px;
            padding-left: 24px;
            position: relative;
            color: #333;
            line-height: 1.5;
        }
        
        .permissions-info li:before {
            content: "‚úì";
            color: #8B0000;
            position: absolute;
            left: 0;
            font-weight: bold;
            font-size: 16px;
        }
        
        .permissions-info li strong {
            color: #006400;
            font-weight: 700;
        }
        
        .permissions-info p {
            margin-top: 12px;
            font-size: 12px;
            color: #666;
            font-style: italic;
            border-top: 1px dashed rgba(139, 0, 0, 0.3);
            padding-top: 12px;
        }

        .permissions-info p strong {
            color: #8B0000;
        }
        
        .error-message {
            color: #8B0000;
            font-size: 14px;
            margin-top: 15px;
            text-align: center;
            display: none;
            padding: 12px;
            background: linear-gradient(135deg, rgba(139, 0, 0, 0.1), rgba(139, 0, 0, 0.05));
            border-radius: 8px;
            border: 1px solid rgba(139, 0, 0, 0.3);
            font-weight: 600;
        }
        
        .success-message {
            color: #006400;
            font-size: 14px;
            margin-top: 15px;
            text-align: center;
            display: none;
            padding: 12px;
            background: linear-gradient(135deg, rgba(0, 100, 0, 0.1), rgba(0, 100, 0, 0.05));
            border-radius: 8px;
            border: 1px solid rgba(0, 100, 0, 0.3);
            font-weight: 600;
        }
        
        .password-hint {
            font-size: 12px;
            color: #8B0000;
            margin-top: 8px;
            padding-left: 5px;
            font-style: italic;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .password-hint:before {
            content: 'üí°';
            font-size: 14px;
        }
        
        .footer {
            text-align: center;
            margin-top: 25px;
            color: #666;
            font-size: 12px;
            border-top: 1px solid rgba(210, 180, 140, 0.5);
            padding-top: 20px;
        }
        
        .footer strong {
            color: #006400;
            font-weight: 700;
            letter-spacing: 1px;
        }

        .footer .version {
            color: #8B0000;
            font-weight: 600;
            margin-top: 5px;
            display: block;
        }
        
        @media (max-width: 480px) {
            .login-container {
                padding: 25px;
                margin: 10px;
            }
            
            .logo-badge {
                width: 80px;
                height: 80px;
                margin-bottom: 15px;
            }
            
            .logo h1 {
                font-size: 24px;
            }
            
            .logo p {
                font-size: 14px;
            }

            .diagonal-line {
                display: none;
            }
        }
        
        /* Estilo para alerta de permiss√£o */
        .permission-alert {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #8B0000 0%, #660000 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 12px;
            box-shadow: 
                0 8px 25px rgba(139, 0, 0, 0.4),
                0 2px 4px rgba(0, 0, 0, 0.1);
            z-index: 9999;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideInRight 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            max-width: 400px;
            border: 1px solid rgba(210, 180, 140, 0.3);
            backdrop-filter: blur(10px);
        }
        
        .permission-alert.warning {
            background: linear-gradient(135deg, #D2B48C 0%, #B8860B 100%);
            color: #333;
        }
        
        .permission-alert.info {
            background: linear-gradient(135deg, #006400 0%, #004d00 100%);
            color: white;
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100%) scale(0.9);
                opacity: 0;
            }
            to {
                transform: translateX(0) scale(1);
                opacity: 1;
            }
        }
        
        .permission-alert-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 26px;
            height: 26px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: auto;
            flex-shrink: 0;
            transition: all 0.3s;
        }
        
        .permission-alert-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }
        
        /* Anima√ß√µes para transi√ß√£o suave */
        .fade-out {
            animation: fadeOut 0.5s ease forwards;
        }
        
        @keyframes fadeOut {
            from {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            to {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        /* Anima√ß√£o de entrada suave */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .login-container {
            animation: fadeInUp 0.6s ease-out;
        }
    </style>
</head>
<body>
    <!-- Linhas diagonais decorativas -->
    <div class="diagonal-line"></div>
    <div class="diagonal-line"></div>
    <div class="diagonal-line"></div>
    <div class="diagonal-line"></div>
    
    <div class="login-container">
        <div class="logo">
            <div class="logo-badge">
                <img src="2-rcg-926x926 (1).jpg" alt="Logo Veterin√°ria" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjQwIiBmaWxsPSIjRjBGMEYwIi8+CjxwYXRoIGQ9Ik00MCA0MEg2MFY2MEg0MFY0MFoiIGZpbGw9IiMwMDY0MDAiLz4KPHBhdGggZD0iTTMwIDMwSDcwVjQwSDMwVjMwWiIgZmlsbD0iIzAwNjQwMCIvPgo8cGF0aCBkPSJNMzAgNjBINzBWODBIMzBWNjBaIiBmaWxsPSIjMDA2NDAwIi8+CjxwYXRoIGQ9Ik02NSAzNUg3NVY1NUg2NVYzNVoiIGZpbGw9IiNEMkI0OEMiLz4KPHBhdGggZD0iTTI1IDM1SDM1VjU1SDI1VjM1WiIgZmlsbD0iI0QyQjQ4QyIvPgo8Y2lyY2xlIGN4PSI1MCIgY3k9IjQwIiByPSI4IiBmaWxsPSIjOEIwMDAwIi8+Cjwvc3ZnPg=='">
            </div>
            <h1>2¬∫ RCG VET SYSTEM</h1>
            <p>SAL√ÉO VETERIN√ÅRIO DO EX√âRCITO</p>
            <div class="logo-subtitle">Sistema de Gest√£o Veterin√°ria Equina</div>
        </div>
        
        <form class="login-form" id="loginForm">
            <div class="form-group">
                <label for="role">POSTO / CARGO</label>
                <select id="role" required>
                    <option value="">Selecione seu posto/cargo</option>
                    <option value="admin">Oficial (Tenente) - Administrador</option>
                    <option value="moderador">Auxiliar / Enfermeiro - Moderador</option>
                    <option value="visitante">Estagi√°rio - Visitante</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="username">IDENTIFICA√á√ÉO MILITAR</label>
                <input type="text" id="username" placeholder="Digite sua identifica√ß√£o militar" required>
                <select id="adminUsers" style="display: none; margin-top: 10px;">
                    <option value="">Selecione um oficial</option>
                    <option value="Maj. Cristovam">Maj. Cristovam</option>
                    <option value="Ten. Henrique">Ten. Henrique</option>
                    <option value="Ten. Espinho">Ten. Espinho</option>
                    <option value="Ten. Aragon">Ten. Aragon</option>
                    <option value="Ten. Andressa">Ten. Andressa</option>
                    <option value="Ten. Thayanne">Ten. Thayanne</option>
                </select>
                <select id="moderadorUsers" style="display: none; margin-top: 10px;">
                    <option value="">Selecione um auxiliar/enfermeiro</option>
                    <option value="CB Bittencourt">CB Bittencourt</option>
                    <option value="CB De Lima">CB De Lima</option>
                    <option value="SD Verg√≠lio">SD Verg√≠lio</option>
                    <option value="SD Cardoso">SD Cardoso</option>
                    <option value="SD Andr√© Vitoria">SD Andr√© Vitoria</option>
                    <option value="SD Luiz Furtado">SD Luiz Furtado</option>
                    <option value="SD Martins Silva">SD Martins Silva</option>
                    <option value="SD Silva">SD Silva</option>
                    <option value="SD Luiz">SD Luiz</option>
                    <option value="SD Silva Custodio">SD Silva Custodio</option>
                    <option value="SD Humberto Neto">SD Humberto Neto</option>
                    <option value="SD Aquiles">SD Aquiles</option>
                    <option value="SD Martins Ramos">SD Martins Ramos</option>
                    <option value="SD Andrade Magalh√£es">SD Andrade Magalh√£es</option>
                    <option value="SD Nicollas Duarte">SD Nicollas Duarte</option>
                    <option value="SD Lucena">SD Lucena</option>
                    <option value="SD Jo√£o Pedrosa">SD Jo√£o Pedrosa</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="password">SENHA DE ACESSO</label>
                <div class="password-container">
                    <input type="password" id="password" placeholder="Digite a senha do seu posto" required>
                    <button type="button" class="toggle-password" id="togglePassword">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
                <div class="password-hint" id="passwordHint"></div>
            </div>
            
            <button type="submit" class="btn-login">ACESSAR SISTEMA</button>
            
            <div class="error-message" id="errorMessage">
                Senha incorreta para este posto. Verifique e tente novamente.
            </div>
            
            <div class="success-message" id="successMessage">
                ‚úî Acesso autorizado! Redirecionando para o sistema...
            </div>
        </form>
        
        <div class="permissions-info">
            <h3>N√çVEIS DE ACESSO DO SISTEMA</h3>
            <ul>
                <li><strong>Oficial (Tenente):</strong> Acesso total ao sistema - Permiss√µes administrativas completas</li>
                <li><strong>Auxiliar/Enfermeiro:</strong> Visualiza√ß√£o de fichas - Cadastro no livro de visitas - Registro de novas c√≥licas</li>
                <li><strong>Estagi√°rio:</strong> Acesso somente leitura - Consulta de registros - Sem permiss√µes de edi√ß√£o</li>
            </ul>
            <p>
                <strong>Observa√ß√£o:</strong> A√ß√µes n√£o permitidas para seu n√≠vel de acesso ser√£o bloqueadas automaticamente.
            </p>
        </div>
        
        <div class="footer">
            <strong>SISTEMA VETERIN√ÅRIO 2¬∫ REGIMENTO DE CAVALARIA DE GUARDAS</strong><br>
            <span class="version">Vers√£o 2.1 ‚Ä¢ Uso exclusivo do Ex√©rcito Brasileiro</span><br>
            <span style="font-size: 11px; margin-top: 5px; display: block;">¬© 2025 Minist√©rio da Defesa - Todos os direitos reservados</span>
        </div>
    </div>

    <script>
        // ========== CONFIGURA√á√ïES DE LOGIN ==========
        // Senhas para cada tipo de permiss√£o
        const passwords = {
            'admin': 'admin123',
            'moderador': 'mod456',
            'visitante': 'estag789'
        };
        
        // Dicas de senha para cada cargo (SEM MOSTRAR A SENHA)
        const passwordHints = {
            'admin': 'Digite a senha do Oficial/Administrador',
            'moderador': 'Digite a senha do Auxiliar/Enfermeiro',
            'visitante': 'Digite a senha do Estagi√°rio'
        };
        
        // ========== ELEMENTOS DO DOM ==========
        const roleSelect = document.getElementById('role');
        const usernameInput = document.getElementById('username');
        const adminUsersSelect = document.getElementById('adminUsers');
        const moderadorUsersSelect = document.getElementById('moderadorUsers');
        const passwordInput = document.getElementById('password');
        const passwordHint = document.getElementById('passwordHint');
        const togglePassword = document.getElementById('togglePassword');
        const errorMessage = document.getElementById('errorMessage');
        const successMessage = document.getElementById('successMessage');
        const loginForm = document.getElementById('loginForm');
        const loginContainer = document.querySelector('.login-container');
        
        // ========== FUN√á√ïES DE LOGIN ==========
        
        function initLoginPage() {
            // Sempre focar no campo de cargo ao carregar a p√°gina
            roleSelect.focus();
            
            // Limpar mensagens
            hideMessages();
            
            // Adicionar evento para mudan√ßa de cargo
            roleSelect.addEventListener('change', handleRoleChange);
            
            // Preencher automaticamente o campo de usu√°rio quando selecionar um administrador
            adminUsersSelect.addEventListener('change', function() {
                if (this.value) {
                    usernameInput.value = this.value;
                }
            });
            
            // Preencher automaticamente o campo de usu√°rio quando selecionar um moderador
            moderadorUsersSelect.addEventListener('change', function() {
                if (this.value) {
                    usernameInput.value = this.value;
                }
            });
            
            // Alternar visibilidade da senha
            togglePassword.addEventListener('click', togglePasswordVisibility);
            
            // Processar o formul√°rio de login
            loginForm.addEventListener('submit', handleLoginSubmit);
            
            // Limpar mensagens quando o usu√°rio come√ßar a digitar
            usernameInput.addEventListener('input', hideMessages);
            passwordInput.addEventListener('input', hideMessages);
            
            // Permitir login com Enter
            document.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.target.matches('select')) {
                    loginForm.dispatchEvent(new Event('submit'));
                }
            });
            
            // Exibir mensagem de boas-vindas
            console.log('Sistema Veterin√°rio Militar 2¬∫ RCG - Tela de Login inicializada');
        }
        
        function handleRoleChange() {
            const selectedRole = this.value;
            
            // Limpar mensagens de erro/sucesso
            hideMessages();
            
            // Atualizar dica de senha (SEM MOSTRAR A SENHA)
            if (selectedRole && passwordHints[selectedRole]) {
                passwordHint.textContent = passwordHints[selectedRole];
            } else {
                passwordHint.textContent = '';
            }
            
            // Resetar todos os selects e inputs
            usernameInput.style.display = 'block';
            usernameInput.required = true;
            adminUsersSelect.style.display = 'none';
            adminUsersSelect.required = false;
            moderadorUsersSelect.style.display = 'none';
            moderadorUsersSelect.required = false;
            usernameInput.value = '';
            adminUsersSelect.value = '';
            moderadorUsersSelect.value = '';
            
            // Mostrar o select apropriado baseado no cargo
            if (selectedRole === 'admin') {
                usernameInput.style.display = 'none';
                adminUsersSelect.style.display = 'block';
                adminUsersSelect.required = true;
                usernameInput.required = false;
                adminUsersSelect.focus();
            } else if (selectedRole === 'moderador') {
                usernameInput.style.display = 'none';
                moderadorUsersSelect.style.display = 'block';
                moderadorUsersSelect.required = true;
                usernameInput.required = false;
                moderadorUsersSelect.focus();
            } else {
                usernameInput.focus();
            }
        }
        
        function togglePasswordVisibility() {
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            
            // Alterar √≠cone do olho
            if (type === 'text') {
                this.innerHTML = `
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17.94 17.94C16.2306 19.243 14.1491 19.9649 12 20C5 20 1 12 1 12C2.24389 9.68192 3.96914 7.65663 6.06 6.06006M9.9 4.24006C10.5883 4.0789 11.2931 3.99836 12 4.00006C19 4.00006 23 12 23 12C22.393 13.1356 21.6691 14.2048 20.84 15.19M14.12 14.12C13.8454 14.4148 13.5141 14.6512 13.1462 14.8151C12.7782 14.9791 12.3809 15.0673 11.9781 15.0744C11.5753 15.0815 11.1752 15.0074 10.8016 14.8565C10.4281 14.7056 10.0887 14.4811 9.80385 14.1962C9.51897 13.9113 9.29439 13.572 9.14351 13.1984C8.99262 12.8249 8.91853 12.4247 8.92563 12.0219C8.93274 11.6191 8.02091 11.2219 8.18488 10.8539C8.34884 10.4859 8.58525 10.1547 8.88 9.88006" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M1 1L23 23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                `;
            } else {
                this.innerHTML = `
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                `;
            }
        }
        
        function handleLoginSubmit(e) {
            e.preventDefault();
            
            const role = roleSelect.value;
            const username = usernameInput.value;
            const password = passwordInput.value;
            
            // Validar se todos os campos foram preenchidos
            if (!role) {
                showError('Por favor, selecione um posto/cargo.');
                roleSelect.focus();
                return;
            }
            
            if (!username) {
                showError('Por favor, preencha a identifica√ß√£o militar.');
                usernameInput.focus();
                return;
            }
            
            if (!password) {
                showError('Por favor, preencha a senha de acesso.');
                passwordInput.focus();
                return;
            }
            
            // Verificar se a senha est√° correta para o cargo selecionado
            if (password === passwords[role]) {
                // Login bem-sucedido
                hideMessages();
                successMessage.style.display = 'block';
                
                // Salvar informa√ß√µes do usu√°rio no localStorage
                localStorage.setItem('currentUser', username);
                localStorage.setItem('userRole', role);
                localStorage.setItem('loginTime', new Date().toISOString());
                
                // Definir permiss√µes baseadas no cargo
                const permissions = getPermissionsByRole(role);
                
                // Salvar permiss√µes no localStorage
                localStorage.setItem('userPermissions', JSON.stringify(permissions));
                
                // Adicionar efeito visual de sa√≠da
                if (loginContainer) {
                    loginContainer.classList.add('fade-out');
                }
                
                // Mensagem de log
                console.log(`üîì Acesso autorizado: ${username} (${role}) - ${new Date().toLocaleString()}`);
                
                // Redirecionar para a tela do sistema ap√≥s 1 segundo
                setTimeout(function() {
                    window.location.href = 'sistema.html';
                }, 1000);
            } else {
                // Senha incorreta
                showError('Senha incorreta para este posto. Tente novamente.');
                
                // Efeito visual para erro
                loginForm.style.animation = 'shake 0.5s';
                setTimeout(() => {
                    loginForm.style.animation = '';
                    passwordInput.focus();
                    passwordInput.select();
                }, 500);
                
                // Log de tentativa falha
                console.warn(`üö´ Tentativa de acesso recusada para: ${username} (${role}) - ${new Date().toLocaleString()}`);
            }
        }
        
        function getPermissionsByRole(role) {
            let permissions = {
                canEditFichas: false,
                canCreateFichas: false,
                canDeleteFichas: false,
                canCreateCadernoVisitas: false,
                canEditCadernoVisitas: false,
                canDeleteCadernoVisitas: false,
                canCreateColica: false,
                canEditColica: false,
                canDeleteColica: false,
                canViewAll: false,
                canExportData: false,
                canManageUsers: false,
                roleName: ''
            };
            
            if (role === 'admin') {
                permissions = {
                    canEditFichas: true,
                    canCreateFichas: true,
                    canDeleteFichas: true,
                    canCreateCadernoVisitas: true,
                    canEditCadernoVisitas: true,
                    canDeleteCadernoVisitas: true,
                    canCreateColica: true,
                    canEditColica: true,
                    canDeleteColica: true,
                    canViewAll: true,
                    canExportData: true,
                    canManageUsers: true,
                    roleName: 'Oficial (Tenente) - Administrador'
                };
            } else if (role === 'moderador') {
                permissions = {
                    canEditFichas: false,
                    canCreateFichas: false,
                    canDeleteFichas: false,
                    canCreateCadernoVisitas: true,
                    canEditCadernoVisitas: true,
                    canDeleteCadernoVisitas: false,
                    canCreateColica: true,
                    canEditColica: false,
                    canDeleteColica: false,
                    canViewAll: true,
                    canExportData: false,
                    canManageUsers: false,
                    roleName: 'Auxiliar / Enfermeiro - Moderador'
                };
            } else if (role === 'visitante') {
                permissions = {
                    canEditFichas: false,
                    canCreateFichas: false,
                    canDeleteFichas: false,
                    canCreateCadernoVisitas: false,
                    canEditCadernoVisitas: false,
                    canDeleteCadernoVisitas: false,
                    canCreateColica: false,
                    canEditColica: false,
                    canDeleteColica: false,
                    canViewAll: true,
                    canExportData: false,
                    canManageUsers: false,
                    roleName: 'Estagi√°rio - Visitante'
                };
            }
            
            return permissions;
        }
        
        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            successMessage.style.display = 'none';
        }
        
        function hideMessages() {
            errorMessage.style.display = 'none';
            successMessage.style.display = 'none';
        }
        
        // ========== FUN√á√ïES GLOBAIS PARA CONTROLE DE PERMISS√ïES ==========
        
        // Fun√ß√£o para mostrar alerta de permiss√£o (ser√° usada em outras p√°ginas)
        window.showPermissionAlert = function(message, type = 'error') {
            // Remover alertas anteriores
            const existingAlerts = document.querySelectorAll('.permission-alert');
            existingAlerts.forEach(alert => alert.remove());
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `permission-alert ${type}`;
            alertDiv.innerHTML = `
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 9V11M12 15H12.01M5.07183 19H18.9282C20.4678 19 21.4301 17.3333 20.6603 16L13.7321 4C12.9623 2.66667 11.0378 2.66667 10.268 4L3.33978 16C2.56998 17.3333 3.53223 19 5.07183 19Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>${message}</span>
                <button class="permission-alert-close">&times;</button>
            `;
            
            document.body.appendChild(alertDiv);
            
            alertDiv.querySelector('.permission-alert-close').addEventListener('click', () => {
                alertDiv.remove();
            });
            
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.style.animation = 'slideInRight 0.3s ease reverse';
                    setTimeout(() => {
                        if (alertDiv.parentNode) {
                            alertDiv.remove();
                        }
                    }, 300);
                }
            }, 5000);
        };
        
        // Fun√ß√£o para verificar permiss√µes (ser√° usada em outras p√°ginas)
        window.checkUserPermissions = function() {
            const userRole = localStorage.getItem('userRole');
            const permissions = JSON.parse(localStorage.getItem('userPermissions') || '{}');
            const loginTime = localStorage.getItem('loginTime');
            
            // Se n√£o tem informa√ß√µes de login, retorna null
            if (!userRole || !permissions || !loginTime) {
                return null;
            }
            
            return { 
                role: userRole, 
                permissions: permissions,
                username: localStorage.getItem('currentUser')
            };
        };
        
        // Fun√ß√£o para verificar permiss√£o espec√≠fica
        window.hasPermission = function(permissionName) {
            const userData = window.checkUserPermissions();
            if (!userData) return false;
            
            return userData.permissions[permissionName] || false;
        };
        
        // Fun√ß√£o para bloquear a√ß√£o se n√£o tiver permiss√£o
        window.blockIfNoPermission = function(permissionName, actionName) {
            if (!window.hasPermission(permissionName)) {
                window.showPermissionAlert(
                    `Voc√™ n√£o possui permiss√£o para ${actionName}. Contate um oficial.`,
                    'error'
                );
                return true; // Bloqueado
            }
            return false; // Permiss√£o concedida
        };
        
        // Fun√ß√£o para obter nome do cargo formatado
        window.getUserRoleName = function() {
            const userData = window.checkUserPermissions();
            return userData ? userData.permissions.roleName : 'N√£o autenticado';
        };
        
        // Inicializar a p√°gina quando carregar
        document.addEventListener('DOMContentLoaded', initLoginPage);
    </script>
</body>
</html>
